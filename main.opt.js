function f(c){for(var a=c[0],e=[0],d,b=1;b<c.length;++b)d=c[b],d>a?(a=d,e=[b]):d===a&&e.push(b);return e}
new (function(){function c(){var a=this;this.b=[];this.f=[];this.i=[];this.A=function(){a.j=!1;a.h();a.c.drawImage(a.canvas,0,0,a.a.width,a.a.height);for(var b=a.c.getImageData(0,0,a.a.width,a.a.height).data,c=new Float64Array(a.a.width*a.a.height),d=0;d<c.length;++d)c[d]=b[4*d+3]/255;b=new Uint8Array(c.buffer);a.s.set(b);a.g.fill(0);mnist20_Step(a.s.byteOffset,a.g.byteOffset);b=new Float64Array(a.g.buffer,a.g.byteOffset,a.u);a.H(f(b)[0])};this.m=function(){a.j=!1};this.o=function(b){var c=(b.changedTouches?
b.changedTouches[0].pageX:b.pageX)-a.canvas.offsetLeft,d=(b.changedTouches?b.changedTouches[0].pageY:b.pageY)-a.canvas.offsetTop;a.j&&(a.l(c,d,!0),a.h());b.preventDefault()};this.w=function(b){var c=(b.changedTouches?b.changedTouches[0].pageX:b.pageX)-a.canvas.offsetLeft;b=(b.changedTouches?b.changedTouches[0].pageY:b.pageY)-a.canvas.offsetTop;a.j=!0;a.l(c,b,!1);a.h()};this.C=function(){a.B()};this.canvas=this.a=document.getElementById("smallCanvas");this.context=this.canvas.getContext("2d");this.context.lineCap=
"round";this.context.lineJoin="round";this.context.strokeStyle="black";this.context.lineWidth=1;this.c=this.a.getContext("2d");this.v=document.getElementById("predict");this.c.I=!0;this.c.J=!0;this.c.K=!0;this.G=mnist20_GetInputSize();this.u=mnist20_GetOutputSize();var c=this.G*Float64Array.BYTES_PER_ELEMENT,d=this.u*Float64Array.BYTES_PER_ELEMENT;this.s=new Uint8Array(HEAPU8.buffer,_malloc(c),c);this.g=new Uint8Array(HEAPU8.buffer,_malloc(d),d);this.h();this.F()}c.prototype.l=function(a,c,d){this.b.push(a);
this.f.push(c);this.i.push(d)};c.prototype.B=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.c.clearRect(0,0,this.a.width,this.a.height);this.b=[];this.f=[];this.i=[];this.D()};c.prototype.h=function(){for(var a=0;a<this.b.length;++a)this.context.beginPath(),this.i[a]&&a?this.context.moveTo(this.b[a-1],this.f[a-1]):this.context.moveTo(this.b[a]-1,this.f[a]),this.context.lineTo(this.b[a],this.f[a]),this.context.stroke();this.context.closePath()};c.prototype.F=function(){this.canvas.addEventListener("mousedown",
this.w,!1);this.canvas.addEventListener("mousemove",this.o,!1);this.canvas.addEventListener("mouseup",this.A);this.canvas.addEventListener("mouseout",this.m,!1);this.canvas.addEventListener("touchstart",this.w,!1);this.canvas.addEventListener("touchmove",this.o,!1);this.canvas.addEventListener("touchend",this.A,!1);this.canvas.addEventListener("touchcancel",this.m,!1);document.getElementById("clear").addEventListener("click",this.C)};c.prototype.D=function(){this.v.innerText="No prediction"};c.prototype.H=
function(a){this.v.innerText="Prediction: "+a};return c}());